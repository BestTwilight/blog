# NovaTech åšå®¢åç«¯ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## âœ… é¡¹ç›®å·²åˆ›å»ºå®Œæˆï¼

æ­å–œï¼æ‚¨çš„ Spring Boot åç«¯å·²ç»å®Œå…¨åˆ›å»ºå¥½äº†ã€‚ç°åœ¨å¯ä»¥ç«‹å³å¯åŠ¨ä½¿ç”¨ã€‚

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
novatech-backend/
â”œâ”€â”€ src/main/java/com/novatech/blog/
â”‚   â”œâ”€â”€ BlogApplication.java          # ä¸»å¯åŠ¨ç±»
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ DataInitializer.java      # æ•°æ®åˆå§‹åŒ–ï¼ˆè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜å’Œç¤ºä¾‹æ–‡ç« ï¼‰
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â”œâ”€â”€ AuthController.java       # è®¤è¯æ¥å£
â”‚   â”‚   â””â”€â”€ PostController.java       # æ–‡ç« CRUDæ¥å£
â”‚   â”œâ”€â”€ dto/                           # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ entity/                        # æ•°æ®åº“å®ä½“ï¼ˆUser, Post, Roleï¼‰
â”‚   â”œâ”€â”€ exception/                     # å…¨å±€å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ repository/                    # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ security/                      # JWTå®‰å…¨é…ç½®
â”‚   â””â”€â”€ service/                       # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ application.yml               # åº”ç”¨é…ç½®
â”œâ”€â”€ pom.xml                           # Mavenä¾èµ–é…ç½®
â””â”€â”€ README.md                         # è¯¦ç»†æ–‡æ¡£
```

## ğŸš€ å¯åŠ¨æ­¥éª¤

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ IDEï¼ˆæ¨èï¼‰

#### IntelliJ IDEA
1. æ‰“å¼€ IntelliJ IDEA
2. é€‰æ‹© `File` -> `Open`
3. é€‰æ‹© `novatech-backend` æ–‡ä»¶å¤¹
4. ç­‰å¾… Maven è‡ªåŠ¨ä¸‹è½½ä¾èµ–
5. æ‰¾åˆ° `BlogApplication.java`
6. å³é”® -> `Run 'BlogApplication'`

#### Eclipse
1. æ‰“å¼€ Eclipse
2. é€‰æ‹© `File` -> `Import` -> `Maven` -> `Existing Maven Projects`
3. é€‰æ‹© `novatech-backend` æ–‡ä»¶å¤¹
4. ç­‰å¾… Maven è‡ªåŠ¨ä¸‹è½½ä¾èµ–
5. å³é”®é¡¹ç›® -> `Run As` -> `Spring Boot App`

#### VS Code
1. å®‰è£…æ’ä»¶ï¼š`Spring Boot Extension Pack`
2. æ‰“å¼€ `novatech-backend` æ–‡ä»¶å¤¹
3. æŒ‰ `F5` æˆ–ç‚¹å‡» `Run` -> `Start Debugging`

### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨

å¦‚æœæ‚¨å®‰è£…äº† Mavenï¼š

```bash
cd d:\IT\code\blog\novatech-backend
mvn clean install
mvn spring-boot:run
```

å¦‚æœæ²¡æœ‰å®‰è£… Mavenï¼Œè¯·ä½¿ç”¨ IDE å¯åŠ¨ï¼ˆæ¨èï¼‰ã€‚

## ğŸ¯ é»˜è®¤é…ç½®

- **æœåŠ¡å™¨åœ°å€**: http://localhost:8080
- **H2 æ•°æ®åº“æ§åˆ¶å°**: http://localhost:8080/h2-console
- **é»˜è®¤ç®¡ç†å‘˜è´¦å·**: 
  - ç”¨æˆ·å: `admin`
  - å¯†ç : `admin123`

## ğŸ“¡ API ç«¯ç‚¹

### è®¤è¯æ¥å£
```
POST /api/auth/login     - ç™»å½•è·å–JWTä»¤ç‰Œ
POST /api/auth/logout    - ç™»å‡ºï¼ˆå‰ç«¯åˆ é™¤Tokenï¼‰
```

### æ–‡ç« æ¥å£
```
GET    /api/posts        - è·å–æ‰€æœ‰æ–‡ç« ï¼ˆå…¬å¼€ï¼‰
GET    /api/posts/{slug} - æ ¹æ®slugè·å–æ–‡ç« è¯¦æƒ…ï¼ˆå…¬å¼€ï¼‰
POST   /api/posts        - åˆ›å»ºæ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
PUT    /api/posts/{id}   - æ›´æ–°æ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
DELETE /api/posts/{id}   - åˆ é™¤æ–‡ç« ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
```

## ğŸ§ª æµ‹è¯• API

### 1. ç™»å½•è·å– Token

ä½¿ç”¨ PowerShell:
```powershell
$response = Invoke-RestMethod -Uri "http://localhost:8080/api/auth/login" `
  -Method Post `
  -ContentType "application/json" `
  -Body '{"username":"admin","password":"admin123"}'

$token = $response.token
Write-Host "Token: $token"
```

ä½¿ç”¨æµè§ˆå™¨å·¥å…·æˆ– Postman:
```
POST http://localhost:8080/api/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "admin123"
}
```

### 2. è·å–æ‰€æœ‰æ–‡ç« 

```
GET http://localhost:8080/api/posts
```

### 3. åˆ›å»ºæ–°æ–‡ç« ï¼ˆéœ€è¦Tokenï¼‰

```
POST http://localhost:8080/api/posts
Authorization: Bearer YOUR_TOKEN_HERE
Content-Type: application/json

{
  "title": "æˆ‘çš„ç¬¬ä¸€ç¯‡åç«¯æ–‡ç« ",
  "excerpt": "è¿™æ˜¯æ‘˜è¦",
  "content": "<p>è¿™æ˜¯æ–‡ç« å†…å®¹</p>",
  "category": "Backend",
  "tags": ["Java", "Spring Boot"],
  "readTime": "5 min"
}
```

## ğŸ”— ä¸å‰ç«¯å¯¹æ¥

### å‰ç«¯éœ€è¦ä¿®æ”¹çš„åœ°æ–¹

åœ¨ `novatech-blog/services/blogService.ts` ä¸­ï¼š

```typescript
// ä¿®æ”¹ API åŸºç¡€ URL
const API_BASE_URL = 'http://localhost:8080/api/v1';

// è·å–æ‰€æœ‰æ–‡ç« 
export const getAllPosts = async (): Promise<BlogPost[]> => {
  const response = await fetch(`${API_BASE_URL}/posts`);
  return response.json();
};

// æ ¹æ® slug è·å–æ–‡ç« è¯¦æƒ…
export const getPostById = async (slug: string): Promise<PostDetail | null> => {
  const response = await fetch(`${API_BASE_URL}/posts/${slug}`);
  if (!response.ok) return null;
  return response.json();
};

// ä¿å­˜æ–‡ç« ï¼ˆéœ€è¦ Tokenï¼‰
export const savePost = async (post: Partial<PostDetail>): Promise<void> => {
  const token = localStorage.getItem('novatech_auth_token');
  const response = await fetch(`${API_BASE_URL}/posts`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`
    },
    body: JSON.stringify({
      title: post.title,
      excerpt: post.excerpt,
      content: post.content,
      category: post.category,
      tags: post.tags,
      readTime: post.readTime
    })
  });
  
  if (!response.ok) throw new Error('Failed to save post');
};
```

åœ¨ `novatech-blog/services/authContext.tsx` ä¸­ï¼š

```typescript
const login = async (password: string) => {
  const response = await fetch('http://localhost:8080/api/auth/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ username: 'admin', password })
  });
  
  if (response.ok) {
    const data = await response.json();
    localStorage.setItem('novatech_auth_token', data.token);
    setIsAdmin(true);
    return true;
  }
  return false;
};
```

## ğŸ“Š æ•°æ®åº“æŸ¥çœ‹

1. å¯åŠ¨åç«¯æœåŠ¡
2. è®¿é—®: http://localhost:8080/h2-console
3. è¾“å…¥è¿æ¥ä¿¡æ¯:
   - JDBC URL: `jdbc:h2:mem:blogdb`
   - Username: `sa`
   - Password: (ç•™ç©º)
4. ç‚¹å‡» Connect

å¯ä»¥æŸ¥çœ‹ `USERS`ã€`POSTS`ã€`POST_TAGS` è¡¨çš„æ•°æ®ã€‚

## ğŸ‰ å·²å®ç°çš„åŠŸèƒ½

âœ… JWT èº«ä»½è®¤è¯  
âœ… ç”¨æˆ·è§’è‰²ç®¡ç†ï¼ˆADMIN/VISITORï¼‰  
âœ… æ–‡ç«  CRUD æ“ä½œ  
âœ… Slug è‡ªåŠ¨ç”Ÿæˆ  
âœ… æ ‡ç­¾ç®¡ç†  
âœ… CORS è·¨åŸŸé…ç½®  
âœ… å…¨å±€å¼‚å¸¸å¤„ç†  
âœ… è‡ªåŠ¨æ•°æ®åˆå§‹åŒ–  
âœ… H2 å†…å­˜æ•°æ®åº“  
âœ… å®Œæ•´çš„ API æ–‡æ¡£  

## ğŸ”§ åˆ‡æ¢åˆ° MySQL

å¦‚æœæƒ³ä½¿ç”¨ MySQL è€Œä¸æ˜¯ H2ï¼š

1. å®‰è£… MySQL å¹¶åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE blogdb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. ä¿®æ”¹ `application.yml`:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/blogdb
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: your_password
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
```

3. æ·»åŠ  MySQL ä¾èµ–åˆ° `pom.xml`:
```xml
<dependency>
    <groupId>com.mysql</groupId>
    <artifactId>mysql-connector-j</artifactId>
    <scope>runtime</scope>
</dependency>
```

## â“ å¸¸è§é—®é¢˜

### ç«¯å£è¢«å ç”¨
ä¿®æ”¹ `application.yml` ä¸­çš„ `server.port: 8080` ä¸ºå…¶ä»–ç«¯å£ã€‚

### ä¾èµ–ä¸‹è½½å¤±è´¥
ä½¿ç”¨å›½å†… Maven é•œåƒï¼Œåœ¨ `pom.xml` ä¸­æ·»åŠ ï¼š
```xml
<repositories>
    <repository>
        <id>aliyun</id>
        <url>https://maven.aliyun.com/repository/public</url>
    </repository>
</repositories>
```

### JWT Token æ— æ•ˆ
æ£€æŸ¥å‰ç«¯è¯·æ±‚å¤´æ˜¯å¦æ­£ç¡®æ·»åŠ  `Authorization: Bearer ${token}`

## ğŸ“ ä¸‹ä¸€æ­¥

1. âœ… å¯åŠ¨åç«¯æœåŠ¡ï¼ˆæœ¬æ–‡æ¡£ï¼‰
2. ğŸ”§ ä¿®æ”¹å‰ç«¯ API è°ƒç”¨ï¼ˆå‚è€ƒä¸Šé¢çš„ä»£ç ï¼‰
3. ğŸš€ å¯åŠ¨å‰ç«¯é¡¹ç›®ï¼ˆåœ¨ novatech-blog ç›®å½•ï¼‰
4. ğŸ¨ æµ‹è¯•å®Œæ•´æµç¨‹ï¼šç™»å½• -> æŸ¥çœ‹æ–‡ç«  -> åˆ›å»ºæ–‡ç« 

---

ğŸŠ **æ­å–œï¼æ‚¨çš„åšå®¢åç«¯å·²ç»å‡†å¤‡å°±ç»ªï¼** ğŸŠ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ README.md æˆ–æ§åˆ¶å°æ—¥å¿—ã€‚
