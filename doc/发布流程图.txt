================================================================================
                    📝 文章发布流程图
================================================================================

【完整发布流程】

┌─────────────────────────────────────────────────────────────────────┐
│                      🚀 开始：发布新文章                              │
└──────────────────────────┬──────────────────────────────────────────┘
                           │
                           ▼
        ┌──────────────────────────────────────┐
        │   访问首页 http://localhost:5173     │
        └──────────────────┬───────────────────┘
                           │
                           ▼
        ┌──────────────────────────────────────┐
        │      点击导航栏右上角 "Write" 按钮    │
        └──────────────────┬───────────────────┘
                           │
                           ▼
        ┌──────────────────────────────────────┐
        │    自动跳转到登录页面                 │
        │  /admin/login                        │
        └──────────────────┬───────────────────┘
                           │
                           ▼
        ┌──────────────────────────────────────┐
        │       输入登录凭证                    │
        │  • 用户名: admin                     │
        │  • 密码: password123                 │
        └──────────────────┬───────────────────┘
                           │
                           ▼
            ┌──────────────────────────┐
            │  验证凭证                │
            │  (发送到后端)            │
            └──────────┬───────────────┘
                       │
         ┌─────────────┴─────────────┐
         │                           │
      成功 ✅                     失败 ❌
         │                           │
         ▼                           ▼
    ┌────────────┐         ┌──────────────────┐
    │ 获得JWT    │         │ 显示错误消息:    │
    │ Token      │         │ "Invalid user"   │
    └────┬───────┘         └──────────────────┘
         │                           │
         │                    返回登录页面
         │                    重试输入
         │
         ▼
┌────────────────────────────────────────────┐
│  自动跳转到编辑页面                        │
│  /admin/editor                             │
│  (左侧编辑 + 右侧预览)                     │
└────────────────┬───────────────────────────┘
                 │
                 ▼
    ┌─────────────────────────────┐
    │   填写文章必填字段           │
    │  • Post Title (必需)         │
    │  • Content (必需)            │
    │  ─────────────────────       │
    │   可选字段:                  │
    │  • Excerpt (摘要)            │
    │  • Category (分类)           │
    │  • Tags (标签)               │
    │  • Read time (阅读时间)      │
    └────────────┬────────────────┘
                 │
                 ▼
    ┌─────────────────────────────┐
    │  实时预览内容               │
    │  (右侧预览区显示)           │
    │  检查格式是否正确           │
    └────────────┬────────────────┘
                 │
                 ▼
    ┌──────────────────────────────────────┐
    │  点击右上角 "Publish" 按钮           │
    │  (或 "Publishing..." - 加载状态)     │
    └────────────┬─────────────────────────┘
                 │
                 ▼
     ┌──────────────────────────────┐
     │  发送数据到后端 API          │
     │  POST /api/posts             │
     │  (包含 JWT Token)            │
     └────────────┬─────────────────┘
                  │
        ┌─────────┴──────────┐
        │                    │
     成功 ✅              失败 ❌
        │                    │
        ▼                    ▼
   ┌─────────┐      ┌──────────────────┐
   │后端保存 │      │显示错误消息:     │
   │文章到  │      │• 未登录          │
   │数据库  │      │• 网络错误        │
   │(H2)   │      │• 后端错误        │
   └────┬──┘      └──────────────────┘
        │                │
        │           重新编辑
        │           或重试
        │
        ▼
   ┌──────────────────────────┐
   │清除编辑表单              │
   │(所有字段变为空)          │
   └────────┬─────────────────┘
            │
            ▼
   ┌──────────────────────────────┐
   │显示成功消息:                 │
   │"✅ Article published         │
   │ successfully!                │
   │ Redirecting to home..."      │
   └────────┬─────────────────────┘
            │
       等待 2 秒
            │
            ▼
   ┌──────────────────────────────┐
   │自动跳转到首页                │
   │http://localhost:5173         │
   └────────┬─────────────────────┘
            │
            ▼
   ┌──────────────────────────────┐
   │首页刷新文章列表              │
   │新文章出现在最顶部            │
   │可以通过分类过滤器筛选        │
   │可以点击进入详情页查看        │
   └────────┬─────────────────────┘
            │
            ▼
┌─────────────────────────────────────────┐
│              ✅ 完成！                  │
│     你的文章已发布到博客！               │
│                                        │
│ 接下来:                                │
│ □ 分享文章链接给朋友                   │
│ □ 继续创作其他文章                     │
│ □ 监控文章阅读统计                     │
└─────────────────────────────────────────┘

================================================================================
【快速查询表】
================================================================================

操作               URL                              所需身份
──────────────────────────────────────────────────────────────
查看首页           http://localhost:5173            无需登录 ✓
进入编辑页面       http://localhost:5173/admin/editor  需要登录 ✓
登录页面           http://localhost:5173/admin/login  无需登录 ✓
查看文章详情       http://localhost:5173/post/{slug}  无需登录 ✓
查看 API 数据     http://localhost:8080/api/posts   无需认证 ✓
发布新文章         POST /api/posts                  需要 JWT Token ✓

================================================================================
【数据流向】
================================================================================

前端                                后端
═══════════════════════════════════════════════════════════════

Editor 页面                      Spring Boot 应用
│                                │
├─ 输入文章内容                  │
│  - 标题, 摘要, 分类             │
│  - 标签, 阅读时间, 内容         │
│                                │
└─► 点击 Publish                 │
    ├─ 验证必填字段 ✓            │
    │  - 标题, 内容               │
    │                            │
    └─► 发送 HTTP POST 请求      │
        ├─ URL: /api/posts       │
        ├─ Headers:              │
        │  - Content-Type: JSON  │
        │  - Authorization: Bearer {TOKEN}
        │                        │
        │                        ◄─┤ 接收请求
        │                        │
        │                        ├─ 验证 JWT Token
        │                        ├─ 验证 Admin 权限
        │                        ├─ 保存到数据库
        │                        │
        │                    ┌──────────────┐
        │                    │ H2 数据库    │
        │                    │ (Post 表)   │
        │                    └──────────────┘
        │                        │
        │                        ├─ 返回响应 (200 OK)
        │                        │
        ◄───── 接收成功响应      │
        │
        ├─ 清空表单
        ├─ 显示成功消息
        └─► 重定向到首页 /
            │
            └─► 重新加载文章列表
                GET /api/posts
                │
                ◄─── 获得更新的文章列表
                     (包含新发布的文章)
                │
                └─► 显示新文章在卡片列表

================================================================================
【错误处理流程】
================================================================================

┌──────────────────────────────┐
│   用户点击 Publish           │
└──────────────┬───────────────┘
               │
        ┌──────┴────────┐
        │               │
       有错误           无错误
        │               │
        ▼               ▼
   ┌────────┐      ┌──────────────┐
   │客户端  │      │调用 API      │
   │验证    │      └──────┬───────┘
   │失败    │             │
   │        │      ┌──────┴────────┐
   │❌      │      │               │
   │        │    有错误           无错误
   │显示    │      │               │
   │错误    │      ▼               ▼
   │提示    │  ┌────────┐    ┌──────────┐
   │        │  │返回    │    │保存成功  │
   │用户    │  │错误    │    │✅        │
   │重新    │  │信息    │    │          │
   │编辑    │  │        │    │显示成功  │
   └────────┘  │❌      │    │消息      │
               │        │    │跳转首页  │
               │用户    │    └──────────┘
               │重新    │
               │登录    │
               │或重试  │
               └────────┘

================================================================================
【状态机】
================================================================================

             初始化
                │
                ▼
    ┌───────────────────────┐
    │   未登录状态          │
    │  (Draft Mode)         │
    └───────────┬───────────┘
                │
         点击 Publish
                │
                ▼
    ┌───────────────────────┐
    │   发布中状态          │
    │  (Publishing...)      │
    │  按钮禁用             │
    └───────────┬───────────┘
                │
         ┌──────┴──────┐
         │             │
      成功            失败
         │             │
         ▼             ▼
    ┌────────┐    ┌────────┐
    │成功    │    │失败    │
    │✅      │    │❌      │
    │自动    │    │保留    │
    │跳转    │    │在页面  │
    │首页    │    │显示错误│
    └────────┘    └────────┘
                       │
                    用户修正
                       │
                       ▼
                  重新发布

================================================================================

更多详细信息请查看: 发布文章完整指南.md
快速参考请查看: 发布文章快速参考.txt

================================================================================
